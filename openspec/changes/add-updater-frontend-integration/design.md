## 上下文
升级系统已在 core/updater 具备最小实现，但尚未与前端对接，也缺乏升级检测地址的系统级配置入口。需要在保持分层与 headless 约束前提下完成端到端集成。

## 目标 / 非目标
- 目标：通过 sysconfig 注入升级检测地址；前端可触发检查并展示结果；用户可选择下载或取消。
- 目标：backend 作为前后端桥接层调用 core/updater，保持 core 与 Wails/UI 解耦。
- 非目标：自动替换主程序、重启、签名校验、差分升级。

## 决策
- 升级检测地址定义为 sysconfig 变量（UpdateEndpoint），通过 ldflags 注入。
- backend 暴露 Wails API：检查更新与执行下载/安装。
- 前端升级页在点击“检查更新”后弹出结果面板，展示推荐字段并提供下载/取消按钮。

## 考虑的替代方案
- 将升级地址放入应用配置（config.yml）：被否决，需求明确要求 sysconfig。
- 前端直接请求升级服务：被否决，违反前端不直接访问系统能力与 core 的约束。

## 风险 / 权衡
- 依赖编译期注入的 UpdateEndpoint，若为空会导致升级检查不可用 → 需要在 API 层返回明确错误。
- 前端下载依赖后端执行，交互需要明确状态提示。

## 迁移计划
- 新增 sysconfig 字段与 Wails API，不影响现有功能。

## 待决问题
- 后续是否支持多通道切换或可配置 appId（不在本次范围）。
